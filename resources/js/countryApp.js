const country_name_element=document.querySelector(".country .name"),total_cases_element=document.querySelector(".total-cases .value"),active_element=document.querySelector(".active .value"),new_active_element=document.querySelector(".active .new-value"),new_cases_element=document.querySelector(".total-cases .new-value"),recovered_element=document.querySelector(".recovered .value"),new_recovered_element=document.querySelector(".recovered .new-value"),deaths_element=document.querySelector(".deaths .value"),new_deaths_element=document.querySelector(".deaths .new-value"),ctx=document.getElementById("axes_line_chart").getContext("2d");let my_chart,app_data=[],cases_list=[],active_list=[],recovered_list=[],deaths_list=[],dates=[],formatedDates=[],user_country="India";function fetchData(e){cases_list=[],active_list=[],recovered_list=[],deaths_list=[],dates=[],formatedDates=[],indexes=[];const t=new Date((new Date).setDate((new Date).getDate()-.5)).toISOString();console.log(e),fetch(`https://api.covid19api.com/country/${e}?from=2020-01-01T00:00:00Z&to=${t}`,{method:"GET",headers:{"X-Access-Token":"5cf9dfd5-3449-485e-b5ae-70a60e997864"}}).then(e=>e.json()).then(e=>{indexes=Object.keys(e),console.log(e),indexes.forEach(t=>{let a=e[t];0==a.Province.trim().length&&0==a.City.trim().length&&(formatedDates.push(formatDate(a.Date)),app_data.push(a),active_list.push(a.Active),cases_list.push(a.Confirmed),recovered_list.push(a.Recovered),deaths_list.push(a.Deaths))})}).then(()=>{updateUI()}).catch(e=>{console.log(e),alert("Please try after sometime")})}function updateUI(){updateStats(),axesLinearChart()}function updateStats(){let e=app_data[app_data.length-1],t=app_data[app_data.length-2];country_name_element.innerHTML=e.Country,total_cases_element.innerHTML=e.Confirmed||0;let a=0;a=e.Confirmed-t.Confirmed,new_cases_element.innerHTML=a>=0?`+${a}`:`-${Math.abs(a)}`,active_element.innerHTML=e.Active||0;let n=0;n=e.Active-t.Active,new_active_element.innerHTML=n>=0?`+${n}`:`-${Math.abs(n)}`,recovered_element.innerHTML=e.Recovered||0;let o=0;o=e.Recovered-t.Recovered,new_recovered_element.innerHTML=o>=0?`+${o}`:`-${Math.abs(o)}`,deaths_element.innerHTML=e.Deaths;let r=0;r=e.Deaths-t.Deaths,new_deaths_element.innerHTML=r>=0?`+${r}`:`-${Math.abs(r)}`}function axesLinearChart(){my_chart&&my_chart.destroy(),my_chart=new Chart(ctx,{type:"line",data:{datasets:[{label:"Cases",data:cases_list,fill:!1,borderColor:"#ffffff",backgroundColor:"#ffffff",borderWidth:1,pointRadius:2.5},{label:"Active",data:active_list,fill:!1,borderColor:"#f9813a",backgroundColor:"#f9813a",borderWidth:1,pointRadius:2},{label:"Deaths",data:deaths_list,fill:!1,borderColor:"#f44336",backgroundColor:"#f44336",borderWidth:1,pointRadius:2},{label:"Recovered",data:recovered_list,fill:!1,borderColor:"#009688",backgroundColor:"#009688",borderWidth:1,pointRadius:2.5}],labels:formatedDates},options:{responsive:!0,maintainAspectRatio:!1}})}fetchData(user_country);const monthsNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function formatDate(e){let t=new Date(e);return`${t.getDate()} ${monthsNames[t.getMonth()]}`}function setHourAsZero(e){let t=new Date(e);t=t.setHours(0),console.log(t.toISOString())}